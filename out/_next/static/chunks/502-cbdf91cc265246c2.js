(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[502],{3222:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return v}});let i=n(1024),r=n(8533),s=r._(n(2265)),o=n(4887),a=i._(n(2912)),c=n(2301),h=n(7709),u=n(9469);n(7873);let l=n(2706),d=i._(n(6515)),p={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function f(e,t,n,i,r,s){let o=null==e?void 0:e.src;if(!e||e["data-loaded-src"]===o)return;e["data-loaded-src"]=o;let a="decode"in e?e.decode():Promise.resolve();a.catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("blur"===t&&r(!0),null==n?void 0:n.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let i=!1,r=!1;n.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>i,isPropagationStopped:()=>r,persist:()=>{},preventDefault:()=>{i=!0,t.preventDefault()},stopPropagation:()=>{r=!0,t.stopPropagation()}})}(null==i?void 0:i.current)&&i.current(e)}})}function g(e){let[t,n]=s.version.split("."),i=parseInt(t,10),r=parseInt(n,10);return i>18||18===i&&r>=3?{fetchPriority:e}:{fetchpriority:e}}let m=(0,s.forwardRef)((e,t)=>{let{src:n,srcSet:i,sizes:r,height:o,width:a,decoding:c,className:h,style:u,fetchPriority:l,placeholder:d,loading:p,unoptimized:m,fill:b,onLoadRef:v,onLoadingCompleteRef:y,setBlurComplete:w,setShowAltText:S,onLoad:_,onError:C,...k}=e;return s.default.createElement("img",{...k,...g(l),loading:p,width:a,height:o,decoding:c,"data-nimg":b?"fill":"1",className:h,style:u,sizes:r,srcSet:i,src:n,ref:(0,s.useCallback)(e=>{t&&("function"==typeof t?t(e):"object"==typeof t&&(t.current=e)),e&&(C&&(e.src=e.src),e.complete&&f(e,d,v,y,w,m))},[n,d,v,y,w,C,m,t]),onLoad:e=>{let t=e.currentTarget;f(t,d,v,y,w,m)},onError:e=>{S(!0),"blur"===d&&w(!0),C&&C(e)}})});function b(e){let{isAppRouter:t,imgAttributes:n}=e,i={as:"image",imageSrcSet:n.srcSet,imageSizes:n.sizes,crossOrigin:n.crossOrigin,referrerPolicy:n.referrerPolicy,...g(n.fetchPriority)};return t?((0,o.preload)(n.src,i),null):s.default.createElement(a.default,null,s.default.createElement("link",{key:"__nimg-"+n.src+n.srcSet+n.sizes,rel:"preload",href:n.srcSet?void 0:n.src,...i}))}let v=(0,s.forwardRef)((e,t)=>{let n=(0,s.useContext)(l.RouterContext),i=(0,s.useContext)(u.ImageConfigContext),r=(0,s.useMemo)(()=>{let e=p||i||h.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),n=e.deviceSizes.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:n}},[i]),{onLoad:o,onLoadingComplete:a}=e,f=(0,s.useRef)(o);(0,s.useEffect)(()=>{f.current=o},[o]);let g=(0,s.useRef)(a);(0,s.useEffect)(()=>{g.current=a},[a]);let[v,y]=(0,s.useState)(!1),[w,S]=(0,s.useState)(!1),{props:_,meta:C}=(0,c.getImgProps)(e,{defaultLoader:d.default,imgConf:r,blurComplete:v,showAltText:w});return s.default.createElement(s.default.Fragment,null,s.default.createElement(m,{..._,unoptimized:C.unoptimized,placeholder:C.placeholder,fill:C.fill,onLoadRef:f,onLoadingCompleteRef:g,setBlurComplete:y,setShowAltText:S,ref:t}),C.priority?s.default.createElement(b,{isAppRouter:!n,imgAttributes:_}):null)});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7555:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AmpStateContext",{enumerable:!0,get:function(){return s}});let i=n(1024),r=i._(n(2265)),s=r.default.createContext({})},8551:function(e,t){"use strict";function n(e){let{ampFirst:t=!1,hybrid:n=!1,hasQuery:i=!1}=void 0===e?{}:e;return t||n&&i}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isInAmpMode",{enumerable:!0,get:function(){return n}})},2301:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImgProps",{enumerable:!0,get:function(){return a}}),n(7873);let i=n(9540),r=n(7709);function s(e){return void 0!==e.default}function o(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function a(e,t){var n;let a,c,h,{src:u,sizes:l,unoptimized:d=!1,priority:p=!1,loading:f,className:g,quality:m,width:b,height:v,fill:y=!1,style:w,onLoad:S,onLoadingComplete:_,placeholder:C="empty",blurDataURL:k,fetchPriority:P,layout:T,objectFit:x,objectPosition:O,lazyBoundary:E,lazyRoot:A,...L}=e,{imgConf:R,showAltText:I,blurComplete:j,defaultLoader:D}=t,M=R||r.imageConfigDefault;if("allSizes"in M)a=M;else{let e=[...M.deviceSizes,...M.imageSizes].sort((e,t)=>e-t),t=M.deviceSizes.sort((e,t)=>e-t);a={...M,allSizes:e,deviceSizes:t}}let N=L.loader||D;delete L.loader,delete L.srcSet;let z="__next_img_default"in N;if(z){if("custom"===a.loader)throw Error('Image with src "'+u+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader')}else{let e=N;N=t=>{let{config:n,...i}=t;return e(i)}}if(T){"fill"===T&&(y=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[T];e&&(w={...w,...e});let t={responsive:"100vw",fill:"100vw"}[T];t&&!l&&(l=t)}let U="",H=o(b),q=o(v);if("object"==typeof(n=u)&&(s(n)||void 0!==n.src)){let e=s(u)?u.default:u;if(!e.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e));if(!e.height||!e.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e));if(c=e.blurWidth,h=e.blurHeight,k=k||e.blurDataURL,U=e.src,!y){if(H||q){if(H&&!q){let t=H/e.width;q=Math.round(e.height*t)}else if(!H&&q){let t=q/e.height;H=Math.round(e.width*t)}}else H=e.width,q=e.height}}let B=!p&&("lazy"===f||void 0===f);(!(u="string"==typeof u?u:U)||u.startsWith("data:")||u.startsWith("blob:"))&&(d=!0,B=!1),a.unoptimized&&(d=!0),z&&u.endsWith(".svg")&&!a.dangerouslyAllowSVG&&(d=!0),p&&(P="high");let F=o(m),$=Object.assign(y?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:x,objectPosition:O}:{},I?{}:{color:"transparent"},w),J="blur"===C&&k&&!j?{backgroundSize:$.objectFit||"cover",backgroundPosition:$.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:'url("data:image/svg+xml;charset=utf-8,'+(0,i.getImageBlurSvg)({widthInt:H,heightInt:q,blurWidth:c,blurHeight:h,blurDataURL:k,objectFit:$.objectFit})+'")'}:{},X=function(e){let{config:t,src:n,unoptimized:i,width:r,quality:s,sizes:o,loader:a}=e;if(i)return{src:n,srcSet:void 0,sizes:void 0};let{widths:c,kind:h}=function(e,t,n){let{deviceSizes:i,allSizes:r}=e;if(n){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let i;i=e.exec(n);i)t.push(parseInt(i[2]));if(t.length){let e=.01*Math.min(...t);return{widths:r.filter(t=>t>=i[0]*e),kind:"w"}}return{widths:r,kind:"w"}}if("number"!=typeof t)return{widths:i,kind:"w"};let s=[...new Set([t,2*t].map(e=>r.find(t=>t>=e)||r[r.length-1]))];return{widths:s,kind:"x"}}(t,r,o),u=c.length-1;return{sizes:o||"w"!==h?o:"100vw",srcSet:c.map((e,i)=>a({config:t,src:n,quality:s,width:e})+" "+("w"===h?e:i+1)+h).join(", "),src:a({config:t,src:n,quality:s,width:c[u]})}}({config:a,src:u,unoptimized:d,width:H,quality:F,sizes:l,loader:N}),W={...L,loading:B?"lazy":f,fetchPriority:P,width:H,height:q,decoding:"async",className:g,style:{...$,...J},sizes:X.sizes,srcSet:X.srcSet,src:X.src},G={unoptimized:d,priority:p,placeholder:C,fill:y};return{props:W,meta:G}}},2912:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{defaultHead:function(){return u},default:function(){return f}});let i=n(1024),r=n(8533),s=r._(n(2265)),o=i._(n(2378)),a=n(7555),c=n(1330),h=n(8551);function u(e){void 0===e&&(e=!1);let t=[s.default.createElement("meta",{charSet:"utf-8"})];return e||t.push(s.default.createElement("meta",{name:"viewport",content:"width=device-width"})),t}function l(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===s.default.Fragment?e.concat(s.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}n(7873);let d=["name","httpEquiv","charSet","itemProp"];function p(e,t){let{inAmpMode:n}=t;return e.reduce(l,[]).reverse().concat(u(n).reverse()).filter(function(){let e=new Set,t=new Set,n=new Set,i={};return r=>{let s=!0,o=!1;if(r.key&&"number"!=typeof r.key&&r.key.indexOf("$")>0){o=!0;let t=r.key.slice(r.key.indexOf("$")+1);e.has(t)?s=!1:e.add(t)}switch(r.type){case"title":case"base":t.has(r.type)?s=!1:t.add(r.type);break;case"meta":for(let e=0,t=d.length;e<t;e++){let t=d[e];if(r.props.hasOwnProperty(t)){if("charSet"===t)n.has(t)?s=!1:n.add(t);else{let e=r.props[t],n=i[t]||new Set;("name"!==t||!o)&&n.has(e)?s=!1:(n.add(e),i[t]=n)}}}}return s}}()).reverse().map((e,t)=>{let i=e.key||t;if(!n&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(t=>e.props.href.startsWith(t))){let t={...e.props||{}};return t["data-href"]=t.href,t.href=void 0,t["data-optimized-fonts"]=!0,s.default.cloneElement(e,t)}return s.default.cloneElement(e,{key:i})})}let f=function(e){let{children:t}=e,n=(0,s.useContext)(a.AmpStateContext),i=(0,s.useContext)(c.HeadManagerContext);return s.default.createElement(o.default,{reduceComponentsToState:p,headManager:i,inAmpMode:(0,h.isInAmpMode)(n)},t)};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9540:function(e,t){"use strict";function n(e){let{widthInt:t,heightInt:n,blurWidth:i,blurHeight:r,blurDataURL:s,objectFit:o}=e,a=i||t,c=r||n,h=s.startsWith("data:image/jpeg")?"%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'/%3E%3C/feComponentTransfer%3E%":"";return a&&c?"%3Csvg xmlns='http%3A//www.w3.org/2000/svg' viewBox='0 0 "+a+" "+c+"'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='"+(i&&r?"1":"20")+"'/%3E"+h+"%3C/filter%3E%3Cimage preserveAspectRatio='none' filter='url(%23b)' x='0' y='0' height='100%25' width='100%25' href='"+s+"'/%3E%3C/svg%3E":"%3Csvg xmlns='http%3A//www.w3.org/2000/svg'%3E%3Cimage style='filter:blur(20px)' preserveAspectRatio='"+("contain"===o?"xMidYMid":"cover"===o?"xMidYMid slice":"none")+"' x='0' y='0' height='100%25' width='100%25' href='"+s+"'/%3E%3C/svg%3E"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImageBlurSvg",{enumerable:!0,get:function(){return n}})},9469:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ImageConfigContext",{enumerable:!0,get:function(){return o}});let i=n(1024),r=i._(n(2265)),s=n(7709),o=r.default.createContext(s.imageConfigDefault)},7709:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{VALID_LOADERS:function(){return n},imageConfigDefault:function(){return i}});let n=["default","imgix","cloudinary","akamai","custom"],i={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"inline",remotePatterns:[],unoptimized:!1}},1295:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return h},unstable_getImgProps:function(){return c}});let i=n(1024),r=n(2301),s=n(7873),o=n(3222),a=i._(n(6515)),c=e=>{(0,s.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:t}=(0,r.getImgProps)(e,{defaultLoader:a.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}},h=o.Image},6515:function(e,t){"use strict";function n(e){let{config:t,src:n,width:i,quality:r}=e;return t.path+"?url="+encodeURIComponent(n)+"&w="+i+"&q="+(r||75)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}}),n.__next_img_default=!0;let i=n},2378:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let i=n(8533),r=i._(n(2265)),s=r.useLayoutEffect,o=r.useEffect;function a(e){let{headManager:t,reduceComponentsToState:n}=e;function i(){if(t&&t.mountedInstances){let i=r.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(n(i,e))}}return s(()=>{var n;return null==t||null==(n=t.mountedInstances)||n.add(e.children),()=>{var n;null==t||null==(n=t.mountedInstances)||n.delete(e.children)}}),s(()=>(t&&(t._pendingUpdate=i),()=>{t&&(t._pendingUpdate=i)})),o(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},7873:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"warnOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},8788:function(e){e.exports={style:{fontFamily:"'__Inter_aaf875', '__Inter_Fallback_aaf875'",fontStyle:"normal"},className:"__className_aaf875"}},6691:function(e,t,n){e.exports=n(1295)},7965:function(e){window,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,(function(t){return e[t]}).bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e){void 0===e&&(e="="),this._paddingCharacter=e}return e.prototype.encodedLength=function(e){return this._paddingCharacter?(e+2)/3*4|0:(8*e+5)/6|0},e.prototype.encode=function(e){for(var t="",n=0;n<e.length-2;n+=3){var i=e[n]<<16|e[n+1]<<8|e[n+2];t+=this._encodeByte(i>>>18&63)+this._encodeByte(i>>>12&63)+this._encodeByte(i>>>6&63)+this._encodeByte(i>>>0&63)}var r=e.length-n;if(r>0){var i=e[n]<<16|(2===r?e[n+1]<<8:0);t+=this._encodeByte(i>>>18&63)+this._encodeByte(i>>>12&63),2===r?t+=this._encodeByte(i>>>6&63):t+=this._paddingCharacter||"",t+=this._paddingCharacter||""}return t},e.prototype.maxDecodedLength=function(e){return this._paddingCharacter?e/4*3|0:(6*e+7)/8|0},e.prototype.decodedLength=function(e){return this.maxDecodedLength(e.length-this._getPaddingLength(e))},e.prototype.decode=function(e){if(0===e.length)return new Uint8Array(0);for(var t=this._getPaddingLength(e),n=e.length-t,i=new Uint8Array(this.maxDecodedLength(n)),r=0,s=0,o=0,a=0,c=0,h=0,u=0;s<n-4;s+=4)a=this._decodeChar(e.charCodeAt(s+0)),c=this._decodeChar(e.charCodeAt(s+1)),h=this._decodeChar(e.charCodeAt(s+2)),u=this._decodeChar(e.charCodeAt(s+3)),i[r++]=a<<2|c>>>4,i[r++]=c<<4|h>>>2,i[r++]=h<<6|u,o|=256&a,o|=256&c,o|=256&h,o|=256&u;if(s<n-1&&(a=this._decodeChar(e.charCodeAt(s)),c=this._decodeChar(e.charCodeAt(s+1)),i[r++]=a<<2|c>>>4,o|=256&a,o|=256&c),s<n-2&&(h=this._decodeChar(e.charCodeAt(s+2)),i[r++]=c<<4|h>>>2,o|=256&h),s<n-3&&(u=this._decodeChar(e.charCodeAt(s+3)),i[r++]=h<<6|u,o|=256&u),0!==o)throw Error("Base64Coder: incorrect characters for decoding");return i},e.prototype._encodeByte=function(e){var t=e;return String.fromCharCode(t+=65+(25-e>>>8&6)+(51-e>>>8&-75)+(61-e>>>8&-15)+(62-e>>>8&3))},e.prototype._decodeChar=function(e){return 256+((42-e&e-44)>>>8&-256+e-43+62)+((46-e&e-48)>>>8&-256+e-47+63)+((47-e&e-58)>>>8&-256+e-48+52)+((64-e&e-91)>>>8&-256+e-65+0)+((96-e&e-123)>>>8&-256+e-97+26)},e.prototype._getPaddingLength=function(e){var t=0;if(this._paddingCharacter){for(var n=e.length-1;n>=0&&e[n]===this._paddingCharacter;n--)t++;if(e.length<4||t>2)throw Error("Base64Coder: incorrect padding")}return t},e}();t.Coder=s;var o=new s;t.encode=function(e){return o.encode(e)},t.decode=function(e){return o.decode(e)};var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype._encodeByte=function(e){var t=e;return String.fromCharCode(t+=65+(25-e>>>8&6)+(51-e>>>8&-75)+(61-e>>>8&-13)+(62-e>>>8&49))},t.prototype._decodeChar=function(e){return 256+((44-e&e-46)>>>8&-256+e-45+62)+((94-e&e-96)>>>8&-256+e-95+63)+((47-e&e-58)>>>8&-256+e-48+52)+((64-e&e-91)>>>8&-256+e-65+0)+((96-e&e-123)>>>8&-256+e-97+26)},t}(s);t.URLSafeCoder=a;var c=new a;t.encodeURLSafe=function(e){return c.encode(e)},t.decodeURLSafe=function(e){return c.decode(e)},t.encodedLength=function(e){return o.encodedLength(e)},t.maxDecodedLength=function(e){return o.maxDecodedLength(e)},t.decodedLength=function(e){return o.decodedLength(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="utf8: invalid string",r="utf8: invalid source encoding";function s(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128)t+=1;else if(r<2048)t+=2;else if(r<55296)t+=3;else if(r<=57343){if(n>=e.length-1)throw Error(i);n++,t+=4}else throw Error(i)}return t}t.encode=function(e){for(var t=new Uint8Array(s(e)),n=0,i=0;i<e.length;i++){var r=e.charCodeAt(i);r<128?t[n++]=r:(r<2048?t[n++]=192|r>>6:(r<55296?t[n++]=224|r>>12:(i++,r=((1023&r)<<10|1023&e.charCodeAt(i))+65536,t[n++]=240|r>>18,t[n++]=128|r>>12&63),t[n++]=128|r>>6&63),t[n++]=128|63&r)}return t},t.encodedLength=s,t.decode=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];if(128&i){var s=void 0;if(i<224){if(n>=e.length)throw Error(r);var o=e[++n];if((192&o)!=128)throw Error(r);i=(31&i)<<6|63&o,s=128}else if(i<240){if(n>=e.length-1)throw Error(r);var o=e[++n],a=e[++n];if((192&o)!=128||(192&a)!=128)throw Error(r);i=(15&i)<<12|(63&o)<<6|63&a,s=2048}else if(i<248){if(n>=e.length-2)throw Error(r);var o=e[++n],a=e[++n],c=e[++n];if((192&o)!=128||(192&a)!=128||(192&c)!=128)throw Error(r);i=(15&i)<<18|(63&o)<<12|(63&a)<<6|63&c,s=65536}else throw Error(r);if(i<s||i>=55296&&i<=57343)throw Error(r);if(i>=65536){if(i>1114111)throw Error(r);i-=65536,t.push(String.fromCharCode(55296|i>>10)),i=56320|1023&i}}t.push(String.fromCharCode(i))}return t.join("")}},function(e,t,n){e.exports=n(3).default},function(e,t,n){"use strict";n.r(t);class i{constructor(e,t){this.lastId=0,this.prefix=e,this.name=t}create(e){this.lastId++;var t=this.lastId,n=this.prefix+t,i=this.name+"["+t+"]",r=!1,s=function(){r||(e.apply(null,arguments),r=!0)};return this[t]=s,{number:t,id:n,name:i,callback:s}}remove(e){delete this[e.number]}}var r,s,o,a,c,h,u=new i("_pusher_script_","Pusher.ScriptReceivers"),l={VERSION:"8.4.0-rc2",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},d=new i("_pusher_dependencies","Pusher.DependenciesReceivers"),p=new class{constructor(e){this.options=e,this.receivers=e.receivers||u,this.loading={}}load(e,t,n){var i=this;if(i.loading[e]&&i.loading[e].length>0)i.loading[e].push(n);else{i.loading[e]=[n];var r=e1.createScriptRequest(i.getPath(e,t)),s=i.receivers.create(function(t){if(i.receivers.remove(s),i.loading[e]){var n=i.loading[e];delete i.loading[e];for(var o=function(e){e||r.cleanup()},a=0;a<n.length;a++)n[a](t,o)}});r.send(s)}}getRoot(e){var t=e1.getDocument().location.protocol;return(e&&e.useTLS||"https:"===t?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version}getPath(e,t){return this.getRoot(t)+"/"+e+this.options.suffix+".js"}}({cdn_http:l.cdn_http,cdn_https:l.cdn_https,version:l.VERSION,suffix:l.dependency_suffix,receivers:d});let f={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var g={buildLogSuffix:function(e){let t;let n=f.urls[e];return n&&(n.fullUrl?t=n.fullUrl:n.path&&(t=f.baseUrl+n.path),t)?`See: ${t}`:""}};(r=a||(a={})).UserAuthentication="user-authentication",r.ChannelAuthorization="channel-authorization";class m extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class b extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class v extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class y extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class w extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class S extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class _ extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class C extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class k extends Error{constructor(e,t){super(t),this.status=e,Object.setPrototypeOf(this,new.target.prototype)}}for(var P=function(e,t,n,i,r){let s=e1.createXHR();for(var o in s.open("POST",n.endpoint,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.headers)s.setRequestHeader(o,n.headers[o]);if(null!=n.headersProvider){let e=n.headersProvider();for(var o in e)s.setRequestHeader(o,e[o])}return s.onreadystatechange=function(){if(4===s.readyState){if(200===s.status){let e;let t=!1;try{e=JSON.parse(s.responseText),t=!0}catch(e){r(new k(200,`JSON returned from ${i.toString()} endpoint was invalid, yet status code was 200. Data was: ${s.responseText}`),null)}t&&r(null,e)}else{let e="";switch(i){case a.UserAuthentication:e=g.buildLogSuffix("authenticationEndpoint");break;case a.ChannelAuthorization:e=`Clients must be authorized to join private or presence channels. ${g.buildLogSuffix("authorizationEndpoint")}`}r(new k(s.status,`Unable to retrieve auth string from ${i.toString()} endpoint - received status: ${s.status} from ${n.endpoint}. ${e}`),null)}}},s.send(t),s},T=String.fromCharCode,x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O={},E=0,A=x.length;E<A;E++)O[x.charAt(E)]=E;var L=function(e){var t=e.charCodeAt(0);return t<128?e:t<2048?T(192|t>>>6)+T(128|63&t):T(224|t>>>12&15)+T(128|t>>>6&63)+T(128|63&t)},R=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[x.charAt(n>>>18),x.charAt(n>>>12&63),t>=2?"=":x.charAt(n>>>6&63),t>=1?"=":x.charAt(63&n)].join("")},I=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,R)},j=class{constructor(e,t,n,i){this.clear=t,this.timer=e(()=>{this.timer&&(this.timer=i(this.timer))},n)}isRunning(){return null!==this.timer}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}};function D(e){window.clearTimeout(e)}function M(e){window.clearInterval(e)}class N extends j{constructor(e,t){super(setTimeout,D,e,function(e){return t(),null})}}class z extends j{constructor(e,t){super(setInterval,M,e,function(e){return t(),e})}}var U={now:()=>Date.now?Date.now():new Date().valueOf(),defer:e=>new N(0,e),method(e,...t){var n=Array.prototype.slice.call(arguments,1);return function(t){return t[e].apply(t,n.concat(arguments))}}};function H(e,...t){for(var n=0;n<t.length;n++){var i=t[n];for(var r in i)i[r]&&i[r].constructor&&i[r].constructor===Object?e[r]=H(e[r]||{},i[r]):e[r]=i[r]}return e}function q(){for(var e=["Pusher"],t=0;t<arguments.length;t++)"string"==typeof arguments[t]?e.push(arguments[t]):e.push(Y(arguments[t]));return e.join(" : ")}function B(e,t){var n=Array.prototype.indexOf;if(null===e)return -1;if(n&&e.indexOf===n)return e.indexOf(t);for(var i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return -1}function F(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)}function $(e){var t=[];return F(e,function(e,n){t.push(n)}),t}function J(e,t,n){for(var i=0;i<e.length;i++)t.call(n||window,e[i],i,e)}function X(e,t){for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i,e,n));return n}function W(e,t){t=t||function(e){return!!e};for(var n=[],i=0;i<e.length;i++)t(e[i],i,e,n)&&n.push(e[i]);return n}function G(e,t){var n={};return F(e,function(i,r){(t&&t(i,r,e,n)||i)&&(n[r]=i)}),n}function V(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1}function Y(e){try{return JSON.stringify(e)}catch(i){var t,n;return JSON.stringify((t=[],n=[],function e(i,r){var s,o,a;switch(typeof i){case"object":if(!i)return null;for(s=0;s<t.length;s+=1)if(t[s]===i)return{$ref:n[s]};if(t.push(i),n.push(r),"[object Array]"===Object.prototype.toString.apply(i))for(s=0,a=[];s<i.length;s+=1)a[s]=e(i[s],r+"["+s+"]");else for(o in a={},i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=e(i[o],r+"["+JSON.stringify(o)+"]"));return a;case"number":case"string":case"boolean":return i}}(e,"$")))}}var Q=new class{constructor(){this.globalLog=e=>{window.console&&window.console.log&&window.console.log(e)}}debug(...e){this.log(this.globalLog,e)}warn(...e){this.log(this.globalLogWarn,e)}error(...e){this.log(this.globalLogError,e)}globalLogWarn(e){window.console&&window.console.warn?window.console.warn(e):this.globalLog(e)}globalLogError(e){window.console&&window.console.error?window.console.error(e):this.globalLogWarn(e)}log(e,...t){var n=q.apply(this,arguments);if(tu.log)tu.log(n);else if(tu.logToConsole){let t=e.bind(this);t(n)}}},K=function(e,t,n,i,r){(void 0!==n.headers||null!=n.headersProvider)&&Q.warn(`To send headers with the ${i.toString()} request, you must use AJAX, rather than JSONP.`);var s=e.nextAuthCallbackID.toString();e.nextAuthCallbackID++;var o=e.getDocument(),a=o.createElement("script");e.auth_callbacks[s]=function(e){r(null,e)},a.src=n.endpoint+"?callback="+encodeURIComponent("Pusher.auth_callbacks['"+s+"']")+"&"+t;var c=o.getElementsByTagName("head")[0]||o.documentElement;c.insertBefore(a,c.firstChild)};class Z{constructor(e){this.src=e}send(e){var t=this,n="Error loading "+t.src;t.script=document.createElement("script"),t.script.id=e.id,t.script.src=t.src,t.script.type="text/javascript",t.script.charset="UTF-8",t.script.addEventListener?(t.script.onerror=function(){e.callback(n)},t.script.onload=function(){e.callback(null)}):t.script.onreadystatechange=function(){("loaded"===t.script.readyState||"complete"===t.script.readyState)&&e.callback(null)},void 0===t.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(t.errorScript=document.createElement("script"),t.errorScript.id=e.id+"_error",t.errorScript.text=e.name+"('"+n+"');",t.script.async=t.errorScript.async=!1):t.script.async=!0;var i=document.getElementsByTagName("head")[0];i.insertBefore(t.script,i.firstChild),t.errorScript&&i.insertBefore(t.errorScript,t.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class ee{constructor(e,t){this.url=e,this.data=t}send(e){if(!this.request){var t,n,i,r=X((t=G(this.data,function(e){return void 0!==e}),n={},F(t,function(e,t){var i;n[t]=("object"==typeof(i=e)&&(i=Y(i)),encodeURIComponent(I(i.toString().replace(/[^\x00-\x7F]/g,L))))}),i=[],F(n,function(e,t){i.push([t,e])}),i),U.method("join","=")).join("&"),s=this.url+"/"+e.number+"?"+r;this.request=e1.createScriptRequest(s),this.request.send(e)}}cleanup(){this.request&&this.request.cleanup()}}function et(e,t,n){return e+(t.useTLS?"s":"")+"://"+(t.useTLS?t.hostTLS:t.hostNonTLS)+n}function en(e,t){return"/app/"+e+("?protocol="+l.PROTOCOL+"&client=js&version=")+l.VERSION+(t?"&"+t:"")}class ei{constructor(){this._callbacks={}}get(e){return this._callbacks["_"+e]}add(e,t,n){var i="_"+e;this._callbacks[i]=this._callbacks[i]||[],this._callbacks[i].push({fn:t,context:n})}remove(e,t,n){if(!e&&!t&&!n){this._callbacks={};return}var i=e?["_"+e]:$(this._callbacks);t||n?this.removeCallback(i,t,n):this.removeAllCallbacks(i)}removeCallback(e,t,n){J(e,function(e){this._callbacks[e]=W(this._callbacks[e]||[],function(e){return t&&t!==e.fn||n&&n!==e.context}),0===this._callbacks[e].length&&delete this._callbacks[e]},this)}removeAllCallbacks(e){J(e,function(e){delete this._callbacks[e]},this)}}class er{constructor(e){this.callbacks=new ei,this.global_callbacks=[],this.failThrough=e}bind(e,t,n){return this.callbacks.add(e,t,n),this}bind_global(e){return this.global_callbacks.push(e),this}unbind(e,t,n){return this.callbacks.remove(e,t,n),this}unbind_global(e){return e?this.global_callbacks=W(this.global_callbacks||[],t=>t!==e):this.global_callbacks=[],this}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(e,t,n){for(var i=0;i<this.global_callbacks.length;i++)this.global_callbacks[i](e,t);var r=this.callbacks.get(e),s=[];if(n?s.push(t,n):t&&s.push(t),r&&r.length>0)for(var i=0;i<r.length;i++)r[i].fn.apply(r[i].context||window,s);else this.failThrough&&this.failThrough(e,t);return this}}class es extends er{constructor(e,t,n,i,r){super(),this.initialize=e1.transportConnectionInitializer,this.hooks=e,this.name=t,this.priority=n,this.key=i,this.options=r,this.state="new",this.timeline=r.timeline,this.activityTimeout=r.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return!!this.hooks.handlesActivityChecks}supportsPing(){return!!this.hooks.supportsPing}connect(){if(this.socket||"initialized"!==this.state)return!1;var e=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(e,this.options)}catch(e){return U.defer(()=>{this.onError(e),this.changeState("closed")}),!1}return this.bindListeners(),Q.debug("Connecting",{transport:this.name,url:e}),this.changeState("connecting"),!0}close(){return!!this.socket&&(this.socket.close(),!0)}send(e){return"open"===this.state&&(U.defer(()=>{this.socket&&this.socket.send(e)}),!0)}ping(){"open"===this.state&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({error:e.toString()}))}onClose(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(e){this.emit("message",e)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=e=>{this.onError(e)},this.socket.onclose=e=>{this.onClose(e)},this.socket.onmessage=e=>{this.onMessage(e)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(e,t){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:t})),this.emit(e,t)}buildTimelineMessage(e){return H({cid:this.id},e)}}class eo{constructor(e){this.hooks=e}isSupported(e){return this.hooks.isSupported(e)}createConnection(e,t,n,i){return new es(this.hooks,e,t,n,i)}}var ea=new eo({urls:{getInitial:function(e,t){var n=(t.httpPath||"")+en(e,"flash=false");return et("ws",t,n)}},handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!e1.getWebSocketAPI()},isSupported:function(){return!!e1.getWebSocketAPI()},getSocket:function(e){return e1.createWebSocket(e)}}),ec={urls:{getInitial:function(e,t){var n=(t.httpPath||"/pusher")+en(e);return et("http",t,n)}},handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},eh=H({getSocket:function(e){return e1.HTTPFactory.createStreamingSocket(e)}},ec),eu=H({getSocket:function(e){return e1.HTTPFactory.createPollingSocket(e)}},ec),el={isSupported:function(){return e1.isXHRSupported()}},ed={ws:ea,xhr_streaming:new eo(H({},eh,el)),xhr_polling:new eo(H({},eu,el))},ep=new eo({file:"sockjs",urls:{getInitial:function(e,t){return et("http",t,t.httpPath||"/pusher")},getPath:function(e,t){return en(e)}},handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(e,t){return new window.SockJS(e,null,{js_path:p.getPath("sockjs",{useTLS:t.useTLS}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(e,t){e.send(JSON.stringify({path:t}))}}),ef={isSupported:function(e){return e1.isXDRSupported(e.useTLS)}},eg=new eo(H({},eh,ef)),em=new eo(H({},eu,ef));ed.xdr_streaming=eg,ed.xdr_polling=em,ed.sockjs=ep;var eb=new class extends er{constructor(){super();var e=this;void 0!==window.addEventListener&&(window.addEventListener("online",function(){e.emit("online")},!1),window.addEventListener("offline",function(){e.emit("offline")},!1))}isOnline(){return void 0===window.navigator.onLine||window.navigator.onLine}};class ev{constructor(e,t,n){this.manager=e,this.transport=t,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}createConnection(e,t,n,i){i=H({},i,{activityTimeout:this.pingDelay});var r=this.transport.createConnection(e,t,n,i),s=null,o=function(){r.unbind("open",o),r.bind("closed",a),s=U.now()},a=e=>{if(r.unbind("closed",a),1002===e.code||1003===e.code)this.manager.reportDeath();else if(!e.wasClean&&s){var t=U.now()-s;t<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(t/2,this.minPingDelay))}};return r.bind("open",o),r}isSupported(e){return this.manager.isAlive()&&this.transport.isSupported(e)}}let ey={decodeMessage:function(e){try{var t=JSON.parse(e.data),n=t.data;if("string"==typeof n)try{n=JSON.parse(t.data)}catch(e){}var i={event:t.event,channel:t.channel,data:n};return t.user_id&&(i.user_id=t.user_id),i}catch(t){throw{type:"MessageParseError",error:t,data:e.data}}},encodeMessage:function(e){return JSON.stringify(e)},processHandshake:function(e){var t=ey.decodeMessage(e);if("pusher:connection_established"===t.event){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:1e3*t.data.activity_timeout}}if("pusher:error"===t.event)return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"},getCloseAction:function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?"backoff":null:4e3===e.code?"tls_only":e.code<4100?"refused":e.code<4200?"backoff":e.code<4300?"retry":"refused"},getCloseError:function(e){return 1e3!==e.code&&1001!==e.code?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null}};class ew extends er{constructor(e,t){super(),this.id=e,this.transport=t,this.activityTimeout=t.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(e){return this.transport.send(e)}send_event(e,t,n){var i={event:e,data:t};return n&&(i.channel=n),Q.debug("Event sent",i),this.send(ey.encodeMessage(i))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var e={message:e=>{var t;try{t=ey.decodeMessage(e)}catch(t){this.emit("error",{type:"MessageParseError",error:t,data:e.data})}if(void 0!==t){switch(Q.debug("Event recd",t),t.event){case"pusher:error":this.emit("error",{type:"PusherError",data:t.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong")}this.emit("message",t)}},activity:()=>{this.emit("activity")},error:e=>{this.emit("error",e)},closed:e=>{t(),e&&e.code&&this.handleCloseEvent(e),this.transport=null,this.emit("closed")}},t=()=>{F(e,(e,t)=>{this.transport.unbind(t,e)})};F(e,(e,t)=>{this.transport.bind(t,e)})}handleCloseEvent(e){var t=ey.getCloseAction(e),n=ey.getCloseError(e);n&&this.emit("error",n),t&&this.emit(t,{action:t,error:n})}}class eS{constructor(e,t){this.transport=e,this.callback=t,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=e=>{var t;this.unbindListeners();try{t=ey.processHandshake(e)}catch(e){this.finish("error",{error:e}),this.transport.close();return}"connected"===t.action?this.finish("connected",{connection:new ew(t.id,this.transport),activityTimeout:t.activityTimeout}):(this.finish(t.action,{error:t.error}),this.transport.close())},this.onClosed=e=>{this.unbindListeners();var t=ey.getCloseAction(e)||"backoff",n=ey.getCloseError(e);this.finish(t,{error:n})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(e,t){this.callback(H({transport:this.transport,action:e},t))}}class e_{constructor(e,t){this.timeline=e,this.options=t||{}}send(e,t){this.timeline.isEmpty()||this.timeline.send(e1.TimelineTransport.getAgent(this,e),t)}}class eC extends er{constructor(e,t){super(function(t,n){Q.debug("No callbacks on "+e+" for "+t)}),this.name=e,this.pusher=t,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(e,t){return t(null,{auth:""})}trigger(e,t){if(0!==e.indexOf("client-"))throw new m("Event '"+e+"' does not start with 'client-'");if(!this.subscribed){var n=g.buildLogSuffix("triggeringClientEvents");Q.warn(`Client event triggered before channel 'subscription_succeeded' event . ${n}`)}return this.pusher.send_event(e,t,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(e){var t=e.event,n=e.data;"pusher_internal:subscription_succeeded"===t?this.handleSubscriptionSucceededEvent(e):"pusher_internal:subscription_count"===t?this.handleSubscriptionCountEvent(e):0!==t.indexOf("pusher_internal:")&&this.emit(t,n,{})}handleSubscriptionSucceededEvent(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",e.data)}handleSubscriptionCountEvent(e){e.data.subscription_count&&(this.subscriptionCount=e.data.subscription_count),this.emit("pusher:subscription_count",e.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(e,t)=>{e?(this.subscriptionPending=!1,Q.error(e.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:e.message},e instanceof k?{status:e.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:t.auth,channel_data:t.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class ek extends eC{authorize(e,t){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:e},t)}}class eP{constructor(){this.reset()}get(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null}each(e){F(this.members,(t,n)=>{e(this.get(n))})}setMyID(e){this.myID=e}onSubscription(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)}addMember(e){return null===this.get(e.user_id)&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)}removeMember(e){var t=this.get(e.user_id);return t&&(delete this.members[e.user_id],this.count--),t}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}class eT extends ek{constructor(e,t){super(e,t),this.members=new eP}authorize(e,t){super.authorize(e,(e,n)=>{var i,r,s,o;return i=this,r=void 0,s=void 0,o=function*(){if(!e){if(null!=n.channel_data){var i=JSON.parse(n.channel_data);this.members.setMyID(i.user_id)}else if(yield this.pusher.user.signinDonePromise,null!=this.pusher.user.user_data)this.members.setMyID(this.pusher.user.user_data.id);else{let e=g.buildLogSuffix("authorizationEndpoint");Q.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${e}, or the user should be signed in.`),t("Invalid auth response");return}}t(e,n)},new(s||(s=Promise))(function(e,t){function n(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var i;t.done?e(t.value):((i=t.value)instanceof s?i:new s(function(e){e(i)})).then(n,a)}c((o=o.apply(i,r||[])).next())})})}handleEvent(e){var t=e.event;if(0===t.indexOf("pusher_internal:"))this.handleInternalEvent(e);else{var n=e.data,i={};e.user_id&&(i.user_id=e.user_id),this.emit(t,n,i)}}handleInternalEvent(e){var t=e.event,n=e.data;switch(t){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(e);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(e);break;case"pusher_internal:member_added":var i=this.members.addMember(n);this.emit("pusher:member_added",i);break;case"pusher_internal:member_removed":var r=this.members.removeMember(n);r&&this.emit("pusher:member_removed",r)}}handleSubscriptionSucceededEvent(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(e.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var ex=n(1),eO=n(0);class eE extends ek{constructor(e,t,n){super(e,t),this.key=null,this.nacl=n}authorize(e,t){super.authorize(e,(e,n)=>{if(e){t(e,n);return}let i=n.shared_secret;if(!i){t(Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null);return}this.key=Object(eO.decode)(i),delete n.shared_secret,t(null,n)})}trigger(e,t){throw new S("Client events are not currently supported for encrypted channels")}handleEvent(e){var t=e.event,n=e.data;if(0===t.indexOf("pusher_internal:")||0===t.indexOf("pusher:")){super.handleEvent(e);return}this.handleEncryptedEvent(t,n)}handleEncryptedEvent(e,t){if(!this.key){Q.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!t.ciphertext||!t.nonce){Q.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+t);return}let n=Object(eO.decode)(t.ciphertext);if(n.length<this.nacl.secretbox.overheadLength){Q.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${n.length}`);return}let i=Object(eO.decode)(t.nonce);if(i.length<this.nacl.secretbox.nonceLength){Q.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${i.length}`);return}let r=this.nacl.secretbox.open(n,i,this.key);if(null===r){Q.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,(t,s)=>{if(t){Q.error(`Failed to make a request to the authEndpoint: ${s}. Unable to fetch new key, so dropping encrypted event`);return}if(null===(r=this.nacl.secretbox.open(n,i,this.key))){Q.error("Failed to decrypt event with new key. Dropping encrypted event");return}this.emit(e,this.getDataToEmit(r))});return}this.emit(e,this.getDataToEmit(r))}getDataToEmit(e){let t=Object(ex.decode)(e);try{return JSON.parse(t)}catch(e){return t}}}class eA extends er{constructor(e,t){super(),this.state="initialized",this.connection=null,this.key=e,this.options=t,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var n=e1.getNetwork();n.bind("online",()=>{this.timeline.info({netinfo:"online"}),("connecting"===this.state||"unavailable"===this.state)&&this.retryIn(0)}),n.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}switchCluster(e){this.key=e,this.updateStrategy(),this.retryIn(0)}connect(){if(!this.connection&&!this.runner){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}}send(e){return!!this.connection&&this.connection.send(e)}send_event(e,t,n){return!!this.connection&&this.connection.send_event(e,t,n)}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var e=(t,n)=>{t?this.runner=this.strategy.connect(0,e):"error"===n.action?(this.emit("error",{type:"HandshakeError",error:n.error}),this.timeline.error({handshakeError:n.error})):(this.abortConnecting(),this.handshakeCallbacks[n.action](n))};this.runner=this.strategy.connect(0,e)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(e){this.timeline.info({action:"retry",delay:e}),e>0&&this.emit("connecting_in",Math.round(e/1e3)),this.retryTimer=new N(e||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new N(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new N(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new N(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(e){return H({},e,{message:e=>{this.resetActivityCheck(),this.emit("message",e)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:e=>{this.emit("error",e)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(e){return H({},e,{connected:e=>{this.activityTimeout=Math.min(this.options.activityTimeout,e.activityTimeout,e.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(e.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let e=e=>t=>{t.error&&this.emit("error",{type:"WebSocketError",error:t.error}),e(t)};return{tls_only:e(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:e(()=>{this.disconnect()}),backoff:e(()=>{this.retryIn(1e3)}),retry:e(()=>{this.retryIn(0)})}}setConnection(e){for(var t in this.connection=e,this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()}abandonConnection(){if(this.connection){for(var e in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);var t=this.connection;return this.connection=null,t}}updateState(e,t){var n=this.state;if(this.state=e,n!==e){var i=e;"connected"===i&&(i+=" with new socket ID "+t.socket_id),Q.debug("State changed",n+" -> "+i),this.timeline.info({state:e,params:t}),this.emit("state_change",{previous:n,current:e}),this.emit(e,t)}}shouldRetry(){return"connecting"===this.state||"connected"===this.state}}class eL{constructor(){this.channels={}}add(e,t){return this.channels[e]||(this.channels[e]=function(e,t){if(0===e.indexOf("private-encrypted-")){if(t.config.nacl)return eR.createEncryptedChannel(e,t,t.config.nacl);let n=g.buildLogSuffix("encryptedChannelSupport");throw new S(`Tried to subscribe to a private-encrypted- channel but no nacl implementation available. ${n}`)}if(0===e.indexOf("private-"))return eR.createPrivateChannel(e,t);if(0===e.indexOf("presence-"))return eR.createPresenceChannel(e,t);if(0!==e.indexOf("#"))return eR.createChannel(e,t);throw new b('Cannot create a channel with name "'+e+'".')}(e,t)),this.channels[e]}all(){var e,t;return e=this.channels,t=[],F(e,function(e){t.push(e)}),t}find(e){return this.channels[e]}remove(e){var t=this.channels[e];return delete this.channels[e],t}disconnect(){F(this.channels,function(e){e.disconnect()})}}var eR={createChannels:()=>new eL,createConnectionManager:(e,t)=>new eA(e,t),createChannel:(e,t)=>new eC(e,t),createPrivateChannel:(e,t)=>new ek(e,t),createPresenceChannel:(e,t)=>new eT(e,t),createEncryptedChannel:(e,t,n)=>new eE(e,t,n),createTimelineSender:(e,t)=>new e_(e,t),createHandshake:(e,t)=>new eS(e,t),createAssistantToTheTransportManager:(e,t,n)=>new ev(e,t,n)};class eI{constructor(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}getAssistant(e){return eR.createAssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class ej{constructor(e,t){this.strategies=e,this.loop=!!t.loop,this.failFast=!!t.failFast,this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}isSupported(){return V(this.strategies,U.method("isSupported"))}connect(e,t){var n=this.strategies,i=0,r=this.timeout,s=null,o=(a,c)=>{c?t(null,c):(i+=1,this.loop&&(i%=n.length),i<n.length?(r&&(r*=2,this.timeoutLimit&&(r=Math.min(r,this.timeoutLimit))),s=this.tryStrategy(n[i],e,{timeout:r,failFast:this.failFast},o)):t(!0))};return s=this.tryStrategy(n[i],e,{timeout:r,failFast:this.failFast},o),{abort:function(){s.abort()},forceMinPriority:function(t){e=t,s&&s.forceMinPriority(t)}}}tryStrategy(e,t,n,i){var r=null,s=null;return n.timeout>0&&(r=new N(n.timeout,function(){s.abort(),i(!0)})),s=e.connect(t,function(e,t){(!(e&&r&&r.isRunning())||n.failFast)&&(r&&r.ensureAborted(),i(e,t))}),{abort:function(){r&&r.ensureAborted(),s.abort()},forceMinPriority:function(e){s.forceMinPriority(e)}}}}class eD{constructor(e){this.strategies=e}isSupported(){return V(this.strategies,U.method("isSupported"))}connect(e,t){var n;return n=X(this.strategies,function(n,i,r,s){var o,a;return n.connect(e,(o=i,a=s,function(e,n){if(a[o].error=e,e){(function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0})(a,function(e){return!!e.error})&&t(!0);return}J(a,function(e){e.forceMinPriority(n.transport.priority)}),t(null,n)}))}),{abort:function(){J(n,eM)},forceMinPriority:function(e){J(n,function(t){t.forceMinPriority(e)})}}}}function eM(e){e.error||e.aborted||(e.abort(),e.aborted=!0)}class eN{constructor(e,t,n){this.strategy=e,this.transports=t,this.ttl=n.ttl||18e5,this.usingTLS=n.useTLS,this.timeline=n.timeline}isSupported(){return this.strategy.isSupported()}connect(e,t){var n=this.usingTLS,i=function(e){var t=e1.getLocalStorage();if(t)try{var n=t[ez(e)];if(n)return JSON.parse(n)}catch(t){eU(e)}return null}(n),r=i&&i.cacheSkipCount?i.cacheSkipCount:0,s=[this.strategy];if(i&&i.timestamp+this.ttl>=U.now()){var o=this.transports[i.transport];o&&(["ws","wss"].includes(i.transport)||r>3?(this.timeline.info({cached:!0,transport:i.transport,latency:i.latency}),s.push(new ej([o],{timeout:2*i.latency+1e3,failFast:!0}))):r++)}var a=U.now(),c=s.pop().connect(e,function i(o,h){o?(eU(n),s.length>0?(a=U.now(),c=s.pop().connect(e,i)):t(o)):(function(e,t,n,i){var r=e1.getLocalStorage();if(r)try{r[ez(e)]=Y({timestamp:U.now(),transport:t,latency:n,cacheSkipCount:i})}catch(e){}}(n,h.transport.name,U.now()-a,r),t(null,h))});return{abort:function(){c.abort()},forceMinPriority:function(t){e=t,c&&c.forceMinPriority(t)}}}}function ez(e){return"pusherTransport"+(e?"TLS":"NonTLS")}function eU(e){var t=e1.getLocalStorage();if(t)try{delete t[ez(e)]}catch(e){}}class eH{constructor(e,{delay:t}){this.strategy=e,this.options={delay:t}}isSupported(){return this.strategy.isSupported()}connect(e,t){var n,i=this.strategy,r=new N(this.options.delay,function(){n=i.connect(e,t)});return{abort:function(){r.ensureAborted(),n&&n.abort()},forceMinPriority:function(t){e=t,n&&n.forceMinPriority(t)}}}}class eq{constructor(e,t,n){this.test=e,this.trueBranch=t,this.falseBranch=n}isSupported(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()}connect(e,t){return(this.test()?this.trueBranch:this.falseBranch).connect(e,t)}}class eB{constructor(e){this.strategy=e}isSupported(){return this.strategy.isSupported()}connect(e,t){var n=this.strategy.connect(e,function(e,i){i&&n.abort(),t(e,i)});return n}}function eF(e){return function(){return e.isSupported()}}var e$={getRequest:function(e){var t=new window.XDomainRequest;return t.ontimeout=function(){e.emit("error",new v),e.close()},t.onerror=function(t){e.emit("error",t),e.close()},t.onprogress=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText)},t.onload=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText),e.emit("finished",200),e.close()},t},abortRequest:function(e){e.ontimeout=e.onerror=e.onprogress=e.onload=null,e.abort()}};class eJ extends er{constructor(e,t,n){super(),this.hooks=e,this.method=t,this.url=n}start(e){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},e1.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(e)}close(){this.unloader&&(e1.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(e,t){for(;;){var n=this.advanceBuffer(t);if(n)this.emit("chunk",{status:e,data:n});else break}this.isBufferTooLong(t)&&this.emit("buffer_too_long")}advanceBuffer(e){var t=e.slice(this.position),n=t.indexOf("\n");return -1!==n?(this.position+=n+1,t.slice(0,n)):null}isBufferTooLong(e){return this.position===e.length&&e.length>262144}}(s=c||(c={}))[s.CONNECTING=0]="CONNECTING",s[s.OPEN=1]="OPEN",s[s.CLOSED=3]="CLOSED";var eX=c,eW=1;function eG(e){var t=-1===e.indexOf("?")?"?":"&";return e+t+"t="+ +new Date+"&n="+eW++}function eV(e){return e1.randomInt(e)}var eY=class{constructor(e,t){var n;this.hooks=e,this.session=eV(1e3)+"/"+function(e){for(var t=[],n=0;n<8;n++)t.push(eV(32).toString(32));return t.join("")}(0),this.location={base:(n=/([^\?]*)\/*(\??.*)/.exec(t))[1],queryString:n[2]},this.readyState=eX.CONNECTING,this.openStream()}send(e){return this.sendRaw(JSON.stringify([e]))}ping(){this.hooks.sendHeartbeat(this)}close(e,t){this.onClose(e,t,!0)}sendRaw(e){if(this.readyState!==eX.OPEN)return!1;try{var t,n;return e1.createSocketRequest("POST",eG((t=this.location,n=this.session,t.base+"/"+n+"/xhr_send"))).start(e),!0}catch(e){return!1}}reconnect(){this.closeStream(),this.openStream()}onClose(e,t,n){this.closeStream(),this.readyState=eX.CLOSED,this.onclose&&this.onclose({code:e,reason:t,wasClean:n})}onChunk(e){if(200===e.status)switch(this.readyState===eX.OPEN&&this.onActivity(),e.data.slice(0,1)){case"o":t=JSON.parse(e.data.slice(1)||"{}"),this.onOpen(t);break;case"a":t=JSON.parse(e.data.slice(1)||"[]");for(var t,n=0;n<t.length;n++)this.onEvent(t[n]);break;case"m":t=JSON.parse(e.data.slice(1)||"null"),this.onEvent(t);break;case"h":this.hooks.onHeartbeat(this);break;case"c":t=JSON.parse(e.data.slice(1)||"[]"),this.onClose(t[0],t[1],!0)}}onOpen(e){var t,n,i;this.readyState===eX.CONNECTING?(e&&e.hostname&&(this.location.base=(t=this.location.base,n=e.hostname,(i=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(t))[1]+n+i[3])),this.readyState=eX.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(e){this.readyState===eX.OPEN&&this.onmessage&&this.onmessage({data:e})}onActivity(){this.onactivity&&this.onactivity()}onError(e){this.onerror&&this.onerror(e)}openStream(){this.stream=e1.createSocketRequest("POST",eG(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",e=>{this.onChunk(e)}),this.stream.bind("finished",e=>{this.hooks.onFinished(this,e)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(e){U.defer(()=>{this.onError(e),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}},eQ={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr_streaming"+e.queryString},onHeartbeat:function(e){e.sendRaw("[]")},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){e.onClose(1006,"Connection interrupted ("+t+")",!1)}},eK={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr"+e.queryString},onHeartbeat:function(){},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){200===t?e.reconnect():e.onClose(1006,"Connection interrupted ("+t+")",!1)}},eZ={getRequest:function(e){var t=new(e1.getXHRAPI());return t.onreadystatechange=t.onprogress=function(){switch(t.readyState){case 3:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText);break;case 4:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText),e.emit("finished",t.status),e.close()}},t},abortRequest:function(e){e.onreadystatechange=null,e.abort()}},e0={createStreamingSocket(e){return this.createSocket(eQ,e)},createPollingSocket(e){return this.createSocket(eK,e)},createSocket:(e,t)=>new eY(e,t),createXHR(e,t){return this.createRequest(eZ,e,t)},createRequest:(e,t,n)=>new eJ(e,t,n)};e0.createXDR=function(e,t){return this.createRequest(e$,e,t)};var e1={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:u,DependenciesReceivers:d,getDefaultStrategy:function(e,t,n){var i,r={};function s(t,i,s,o,a){var c=n(e,t,i,s,o,a);return r[t]=c,c}var o=Object.assign({},t,{hostNonTLS:e.wsHost+":"+e.wsPort,hostTLS:e.wsHost+":"+e.wssPort,httpPath:e.wsPath}),a=Object.assign({},o,{useTLS:!0}),c=Object.assign({},t,{hostNonTLS:e.httpHost+":"+e.httpPort,hostTLS:e.httpHost+":"+e.httpsPort,httpPath:e.httpPath}),h={loop:!0,timeout:15e3,timeoutLimit:6e4},u=new eI({minPingDelay:1e4,maxPingDelay:e.activityTimeout}),l=new eI({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),d=s("ws","ws",3,o,u),p=s("wss","ws",3,a,u),f=s("sockjs","sockjs",1,c),g=s("xhr_streaming","xhr_streaming",1,c,l),m=s("xdr_streaming","xdr_streaming",1,c,l),b=s("xhr_polling","xhr_polling",1,c),v=s("xdr_polling","xdr_polling",1,c),y=new ej([d],h),w=new ej([p],h),S=new ej([f],h),_=new ej([new eq(eF(g),g,m)],h),C=new ej([new eq(eF(b),b,v)],h),k=new ej([new eq(eF(_),new eD([_,new eH(C,{delay:4e3})]),C)],h),P=new eq(eF(k),k,S);return i=new eD(t.useTLS?[y,new eH(P,{delay:2e3})]:[y,new eH(w,{delay:2e3}),new eH(P,{delay:5e3})]),new eN(new eB(new eq(eF(d),i,P)),r,{ttl:18e5,timeline:t.timeline,useTLS:t.useTLS})},Transports:ed,transportConnectionInitializer:function(){var e=this;e.timeline.info(e.buildTimelineMessage({transport:e.name+(e.options.useTLS?"s":"")})),e.hooks.isInitialized()?e.changeState("initialized"):e.hooks.file?(e.changeState("initializing"),p.load(e.hooks.file,{useTLS:e.options.useTLS},function(t,n){e.hooks.isInitialized()?(e.changeState("initialized"),n(!0)):(t&&e.onError(t),e.onClose(),n(!1))})):e.onClose()},HTTPFactory:e0,TimelineTransport:{name:"jsonp",getAgent:function(e,t){return function(n,i){var r="http"+(t?"s":"")+"://"+(e.host||e.options.host)+e.options.path,s=e1.createJSONPRequest(r,n),o=e1.ScriptReceivers.create(function(t,n){u.remove(o),s.cleanup(),n&&n.host&&(e.host=n.host),i&&i(t,n)});s.send(o)}}},getXHRAPI:()=>window.XMLHttpRequest,getWebSocketAPI:()=>window.WebSocket||window.MozWebSocket,setup(e){window.Pusher=e;var t=()=>{this.onDocumentBody(e.ready)};window.JSON?t():p.load("json2",{},t)},getDocument:()=>document,getProtocol(){return this.getDocument().location.protocol},getAuthorizers:()=>({ajax:P,jsonp:K}),onDocumentBody(e){document.body?e():setTimeout(()=>{this.onDocumentBody(e)},0)},createJSONPRequest:(e,t)=>new ee(e,t),createScriptRequest:e=>new Z(e),getLocalStorage(){try{return window.localStorage}catch(e){return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){return new(this.getXHRAPI())},createMicrosoftXHR:()=>new ActiveXObject("Microsoft.XMLHTTP"),getNetwork:()=>eb,createWebSocket(e){return new(this.getWebSocketAPI())(e)},createSocketRequest(e,t){if(this.isXHRSupported())return this.HTTPFactory.createXHR(e,t);if(this.isXDRSupported(0===t.indexOf("https:")))return this.HTTPFactory.createXDR(e,t);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var e=this.getXHRAPI();return!!e&&void 0!==new e().withCredentials},isXDRSupported(e){var t=this.getProtocol();return!!window.XDomainRequest&&t===(e?"https:":"http:")},addUnloadListener(e){void 0!==window.addEventListener?window.addEventListener("unload",e,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",e)},removeUnloadListener(e){void 0!==window.addEventListener?window.removeEventListener("unload",e,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",e)},randomInt:e=>Math.floor(function(){let e=window.crypto||window.msCrypto,t=e.getRandomValues(new Uint32Array(1))[0];return t/4294967296}()*e)};(o=h||(h={}))[o.ERROR=3]="ERROR",o[o.INFO=6]="INFO",o[o.DEBUG=7]="DEBUG";var e2=h;class e3{constructor(e,t,n){this.key=e,this.session=t,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}log(e,t){e<=this.options.level&&(this.events.push(H({},t,{timestamp:U.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(e){this.log(e2.ERROR,e)}info(e){this.log(e2.INFO,e)}debug(e){this.log(e2.DEBUG,e)}isEmpty(){return 0===this.events.length}send(e,t){var n=H({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],e(n,(e,n)=>{!e&&this.sent++,t&&t(e,n)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class e6{constructor(e,t,n,i){this.name=e,this.priority=t,this.transport=n,this.options=i||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(e,t){if(!this.isSupported())return e8(new C,t);if(this.priority<e)return e8(new y,t);var n=!1,i=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),r=null,s=function(){i.unbind("initialized",s),i.connect()},o=function(){r=eR.createHandshake(i,function(e){n=!0,h(),t(null,e)})},a=function(e){h(),t(e)},c=function(){var e;h(),e=Y(i),t(new w(e))},h=function(){i.unbind("initialized",s),i.unbind("open",o),i.unbind("error",a),i.unbind("closed",c)};return i.bind("initialized",s),i.bind("open",o),i.bind("error",a),i.bind("closed",c),i.initialize(),{abort:()=>{n||(h(),r?r.close():i.close())},forceMinPriority:e=>{!n&&this.priority<e&&(r?r.close():i.close())}}}}function e8(e,t){return U.defer(function(){t(e)}),{abort:function(){},forceMinPriority:function(){}}}let{Transports:e5}=e1;var e4=function(e,t,n,i,r,s){var o,a=e5[n];if(!a)throw new _(n);return e.enabledTransports&&-1===B(e.enabledTransports,t)||e.disabledTransports&&-1!==B(e.disabledTransports,t)?o=e9:(r=Object.assign({ignoreNullOrigin:e.ignoreNullOrigin},r),o=new e6(t,i,s?s.getAssistant(a):a,r)),o},e9={isSupported:function(){return!1},connect:function(e,t){var n=U.defer(function(){t(new C)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}};let e7=(e,t)=>{var n="socket_id="+encodeURIComponent(e.socketId);for(var i in t.params)n+="&"+encodeURIComponent(i)+"="+encodeURIComponent(t.params[i]);if(null!=t.paramsProvider){let e=t.paramsProvider();for(var i in e)n+="&"+encodeURIComponent(i)+"="+encodeURIComponent(e[i])}return n};var te=e=>{if(void 0===e1.getAuthorizers()[e.transport])throw`'${e.transport}' is not a recognized auth transport`;return(t,n)=>{let i=e7(t,e);e1.getAuthorizers()[e.transport](e1,i,e,a.UserAuthentication,n)}};let tt=(e,t)=>{var n="socket_id="+encodeURIComponent(e.socketId);for(var i in n+="&channel_name="+encodeURIComponent(e.channelName),t.params)n+="&"+encodeURIComponent(i)+"="+encodeURIComponent(t.params[i]);if(null!=t.paramsProvider){let e=t.paramsProvider();for(var i in e)n+="&"+encodeURIComponent(i)+"="+encodeURIComponent(e[i])}return n};var tn=e=>{if(void 0===e1.getAuthorizers()[e.transport])throw`'${e.transport}' is not a recognized auth transport`;return(t,n)=>{let i=tt(t,e);e1.getAuthorizers()[e.transport](e1,i,e,a.ChannelAuthorization,n)}};let ti=(e,t,n)=>{let i={authTransport:t.transport,authEndpoint:t.endpoint,auth:{params:t.params,headers:t.headers}};return(t,r)=>{let s=e.channel(t.channelName),o=n(s,i);o.authorize(t.socketId,r)}};function tr(e,t){let n={activityTimeout:e.activityTimeout||l.activityTimeout,cluster:e.cluster,httpPath:e.httpPath||l.httpPath,httpPort:e.httpPort||l.httpPort,httpsPort:e.httpsPort||l.httpsPort,pongTimeout:e.pongTimeout||l.pongTimeout,statsHost:e.statsHost||l.stats_host,unavailableTimeout:e.unavailableTimeout||l.unavailableTimeout,wsPath:e.wsPath||l.wsPath,wsPort:e.wsPort||l.wsPort,wssPort:e.wssPort||l.wssPort,enableStats:"enableStats"in e?e.enableStats:"disableStats"in e&&!e.disableStats,httpHost:e.httpHost?e.httpHost:e.cluster?`sockjs-${e.cluster}.pusher.com`:l.httpHost,useTLS:function(e){if("https:"===e1.getProtocol());else if(!1===e.forceTLS)return!1;return!0}(e),wsHost:e.wsHost?e.wsHost:`ws-${e.cluster}.pusher.com`,userAuthenticator:function(e){let t=Object.assign(Object.assign({},l.userAuthentication),e.userAuthentication);return ts(t)?t.customHandler:te(t)}(e),channelAuthorizer:function(e,t){let n=function(e,t){let n;if("channelAuthorization"in e)n=Object.assign(Object.assign({},l.channelAuthorization),e.channelAuthorization);else if(n={transport:e.authTransport||l.authTransport,endpoint:e.authEndpoint||l.authEndpoint},"auth"in e&&("params"in e.auth&&(n.params=e.auth.params),"headers"in e.auth&&(n.headers=e.auth.headers)),"authorizer"in e)return{customHandler:ti(t,n,e.authorizer)};return n}(e,t);return ts(n)?n.customHandler:tn(n)}(e,t)};return"disabledTransports"in e&&(n.disabledTransports=e.disabledTransports),"enabledTransports"in e&&(n.enabledTransports=e.enabledTransports),"ignoreNullOrigin"in e&&(n.ignoreNullOrigin=e.ignoreNullOrigin),"timelineParams"in e&&(n.timelineParams=e.timelineParams),"nacl"in e&&(n.nacl=e.nacl),n}let ts=e=>"customHandler"in e&&null!=e.customHandler;class to extends er{constructor(e){super(function(e,t){Q.debug(`No callbacks on watchlist events for ${e}`)}),this.pusher=e,this.bindWatchlistInternalEvent()}handleEvent(e){e.data.events.forEach(e=>{this.emit(e.name,e)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",e=>{"pusher_internal:watchlist_events"===e.event&&this.handleEvent(e)})}}var ta=function(){let e,t;let n=new Promise((n,i)=>{e=n,t=i});return{promise:n,resolve:e,reject:t}};class tc extends er{constructor(e){super(function(e,t){Q.debug("No callbacks on user for "+e)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(e,t)=>{if(e){Q.warn(`Error during signin: ${e}`),this._cleanup();return}this.pusher.send_event("pusher:signin",{auth:t.auth,user_data:t.user_data})},this.pusher=e,this.pusher.connection.bind("state_change",({previous:e,current:t})=>{"connected"!==e&&"connected"===t&&this._signin(),"connected"===e&&"connected"!==t&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new to(e),this.pusher.connection.bind("message",e=>{"pusher:signin_success"===e.event&&this._onSigninSuccess(e.data),this.serverToUserChannel&&this.serverToUserChannel.name===e.channel&&this.serverToUserChannel.handleEvent(e)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),"connected"===this.pusher.connection.state&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(e){try{this.user_data=JSON.parse(e.user_data)}catch(t){Q.error(`Failed parsing user data after signin: ${e.user_data}`),this._cleanup();return}if("string"!=typeof this.user_data.id||""===this.user_data.id){Q.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){this.serverToUserChannel=new eC(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((e,t)=>{0!==e.indexOf("pusher_internal:")&&0!==e.indexOf("pusher:")&&this.emit(e,t)}),(e=>{e.subscriptionPending&&e.subscriptionCancelled?e.reinstateSubscription():e.subscriptionPending||"connected"!==this.pusher.connection.state||e.subscribe()})(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested||this.signinDonePromise&&!this.signinDonePromise.done)return;let{promise:e,resolve:t,reject:n}=ta();e.done=!1;let i=()=>{e.done=!0};e.then(i).catch(i),this.signinDonePromise=e,this._signinDoneResolve=t}}class th{static ready(){th.isReady=!0;for(var e=0,t=th.instances.length;e<t;e++)th.instances[e].connect()}static getClientFeatures(){return $(G({ws:e1.Transports.ws},function(e){return e.isSupported({})}))}constructor(e,t){(function(e){if(null==e)throw"You must pass your app key when you instantiate Pusher."})(e),function(e){if(null==e)throw"You must pass an options object";if(null==e.cluster)throw"Options object must provide a cluster";"disableStats"in e&&Q.warn("The disableStats option is deprecated in favor of enableStats")}(t),this.key=e,this.options=t,this.config=tr(this.options,this),this.channels=eR.createChannels(),this.global_emitter=new er,this.sessionID=e1.randomInt(1e9),this.timeline=new e3(this.key,this.sessionID,{cluster:this.config.cluster,features:th.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:e2.INFO,version:l.VERSION}),this.config.enableStats&&(this.timelineSender=eR.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+e1.TimelineTransport.name})),this.connection=eR.createConnectionManager(this.key,{getStrategy:e=>e1.getDefaultStrategy(this.config,e,e4),timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",e=>{var t=0===e.event.indexOf("pusher_internal:");if(e.channel){var n=this.channel(e.channel);n&&n.handleEvent(e)}t||this.global_emitter.emit(e.event,e.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",e=>{Q.warn(e)}),th.instances.push(this),this.timeline.info({instances:th.instances.length}),this.user=new tc(this),th.isReady&&this.connect()}switchCluster(e){let{appKey:t,cluster:n}=e;this.key=t,this.options=Object.assign(Object.assign({},this.options),{cluster:n}),this.config=tr(this.options,this),this.connection.switchCluster(this.key)}channel(e){return this.channels.find(e)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var e=this.connection.isUsingTLS(),t=this.timelineSender;this.timelineSenderTimer=new z(6e4,function(){t.send(e)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(e,t,n){return this.global_emitter.bind(e,t,n),this}unbind(e,t,n){return this.global_emitter.unbind(e,t,n),this}bind_global(e){return this.global_emitter.bind_global(e),this}unbind_global(e){return this.global_emitter.unbind_global(e),this}unbind_all(e){return this.global_emitter.unbind_all(),this}subscribeAll(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)}subscribe(e){var t=this.channels.add(e,this);return t.subscriptionPending&&t.subscriptionCancelled?t.reinstateSubscription():t.subscriptionPending||"connected"!==this.connection.state||t.subscribe(),t}unsubscribe(e){var t=this.channels.find(e);t&&t.subscriptionPending?t.cancelSubscription():(t=this.channels.remove(e))&&t.subscribed&&t.unsubscribe()}send_event(e,t,n){return this.connection.send_event(e,t,n)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}th.instances=[],th.isReady=!1,th.logToConsole=!1,th.Runtime=e1,th.ScriptReceivers=e1.ScriptReceivers,th.DependenciesReceivers=e1.DependenciesReceivers,th.auth_callbacks=e1.auth_callbacks;var tu=t.default=th;e1.setup(th)}])}}]);